<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yargƒ±tay Kararlarƒ± - Emsal Arama Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .search-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
            background: white;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            font-size: 1.2rem;
        }

        .ai-search-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .ai-search-box h3 {
            color: white;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-search-box textarea {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
            background: rgba(255, 255, 255, 0.95);
        }

        .ai-search-box textarea:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .search-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 70vh;
        }

        .results-panel, .detail-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .panel-header h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .results-list {
            flex: 1;
            overflow-y: auto;
        }

        .decision-item {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .decision-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .decision-item.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .decision-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .decision-number {
            font-weight: 700;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .similarity-score {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: auto;
        }

        .decision-summary {
            color: #7f8c8d;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-top: 10px;
        }

        .decision-meta {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .meta-item {
            color: #95a5a6;
        }

        .detail-content {
            flex: 1;
            overflow-y: auto;
            line-height: 1.7;
        }

        .detail-placeholder {
            text-align: center;
            color: #95a5a6;
            font-style: italic;
            padding: 50px 20px;
        }

        .decision-full-text {
            white-space: pre-wrap;
            font-size: 1rem;
            line-height: 1.7;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-style: italic;
        }

        .api-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #ffd700;
        }

        .api-section h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .api-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .api-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .api-button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .results-panel, .detail-panel {
                height: 50vh;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a6fd8, #6b4190);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öñÔ∏è Yargƒ±tay Kararlarƒ±</h1>
            <p>Emsal Arama ve Analiz Sistemi</p>
        </div>

        <div class="search-section">
            <div class="api-section">
                <h4>üîë Gemini API Anahtarƒ± (Yapay Zeka Analizi ƒ∞√ßin)</h4>
                <div class="api-input">
                    <input type="password" id="apiKeyInput" placeholder="Gemini API anahtarƒ±nƒ±zƒ± girin (isteƒüe baƒülƒ±)">
                    <button class="api-button" onclick="setApiKey()">Kaydet</button>
                </div>
                <div id="apiStatus">
                    <span style="color: #f39c12;">‚ö†Ô∏è API anahtarƒ± yoksa basit arama kullanƒ±lacak</span>
                </div>
            </div>

            <div class="search-box">
                <input type="text" id="keywordSearch" placeholder="Anahtar kelime girin (√∂rn: tapu, miras, s√∂zle≈üme...)">
                <span class="search-icon">üîç</span>
            </div>

            <div class="ai-search-box">
                <h3>ü§ñ Yapay Zeka Destekli Benzerlik Aramasƒ±</h3>
                <textarea id="aiSearch" placeholder="Aradƒ±ƒüƒ±nƒ±z hukuki durumu detaylƒ± olarak a√ßƒ±klayƒ±n. √ñrnek: 'Satƒ±≈ü s√∂zle≈ümesinde ayƒ±p nedeniyle alƒ±cƒ±nƒ±n s√∂zle≈ümeden d√∂nme hakkƒ± ve tazminat talep etmesi durumunda...'"></textarea>
                <button class="search-button" onclick="performSearch()">
                    <span>üîç</span>
                    Ara ve Analiz Et
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="results-panel">
                <div class="panel-header">
                    <h3>üìã Bulunan Kararlar</h3>
                </div>
                <div class="results-list" id="resultsList">
                    <div class="detail-placeholder">
                        Veriler y√ºkleniyor...
                    </div>
                </div>
            </div>

            <div class="detail-panel">
                <div class="panel-header">
                    <h3>üìÑ Karar Detayƒ±</h3>
                </div>
                <div class="detail-content" id="detailContent">
                    <div class="detail-placeholder">
                        Bir karar se√ßin ve detaylarƒ±nƒ± burada g√∂r√ºnt√ºleyin
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global deƒüi≈ükenler
        let GEMINI_API_KEY = '';
        let allDecisions = [];
        let currentResults = [];
        let selectedDecision = null;

        // √ñrnek veri - ger√ßek uygulamada JSON dosyanƒ±zdan y√ºklenecek
        const sampleDecisions = [
            {
                id: 1,
                number: "2023/1245 K.2023/2156",
                court: "15. Hukuk Dairesi",
                date: "2023-05-15",
                keywords: ["tapu", "m√ºlkiyet", "iktisap"],
                summary: "Tapu sicilinde kayƒ±tlƒ± malik sƒ±fatƒ±yla dava a√ßma yetkisi ve iyiniyetli √º√ß√ºnc√º ki≈üilerin durumu",
                fullText: `YARGITAY 15. HUKUK DAƒ∞RESƒ∞

Esas No: 2023/1245
Karar No: 2023/2156
Karar Tarihi: 15.05.2023

√ñZET: Tapu sicilinde malik olarak g√∂z√ºken ki≈üinin o ta≈üƒ±nmaza ili≈ükin dava a√ßma yetkisi bulunduƒüu, ancak iyiniyetli √º√ß√ºnc√º ki≈üilerin haklarƒ±nƒ±n da korunmasƒ± gerektiƒüi...

KARAR:
Mahkemece, davalƒ±nƒ±n tapu sicilinde malik olarak g√∂z√ºkmediƒüi, bu nedenle dava a√ßma yetkisinin bulunmadƒ±ƒüƒ± gerek√ßesiyle davanƒ±n reddine karar verilmi≈ü...

Bu durumda mahkeme kararƒ±nda hukuki isabet g√∂r√ºlmemi≈ütir. Zira T√ºrk Medeni Kanunu'nun 1007. maddesi gereƒüince, tapu sicilindeki kayƒ±tlar lehine h√ºk√ºm ifade eder...`
            },
            {
                id: 2,
                number: "2023/2341 K.2023/3245",
                court: "11. Hukuk Dairesi", 
                date: "2023-08-22",
                keywords: ["s√∂zle≈üme", "satƒ±≈ü", "ayƒ±p"],
                summary: "Satƒ±≈ü s√∂zle≈ümesinde ayƒ±p nedeniyle s√∂zle≈ümeden d√∂nme ve tazminat talep edilmesi",
                fullText: `YARGITAY 11. HUKUK DAƒ∞RESƒ∞

Esas No: 2023/2341
Karar No: 2023/3245
Karar Tarihi: 22.08.2023

√ñZET: Satƒ±lan malda ayƒ±p bulunmasƒ± halinde alƒ±cƒ±nƒ±n se√ßimlik haklarƒ± ve tazminat talebinin ko≈üullarƒ±...

KARAR:
Davacƒ±, satƒ±n aldƒ±ƒüƒ± aracƒ±n ayƒ±plƒ± olduƒüunu, bu nedenle s√∂zle≈ümeden d√∂nd√ºƒü√ºn√º ve √∂dediƒüi bedelin iadesini talep etmi≈ütir...

T√ºrk Bor√ßlar Kanunu'nun 227. maddesi uyarƒ±nca, satƒ±lan ≈üeyin ayƒ±plƒ± olmasƒ± durumunda alƒ±cƒ±nƒ±n se√ßimlik haklarƒ± vardƒ±r...`
            },
            {
                id: 3,
                number: "2023/3456 K.2023/4567",
                court: "2. Hukuk Dairesi",
                date: "2023-09-10", 
                keywords: ["miras", "tere–∫–µ", "payla≈üƒ±m"],
                summary: "Miras ortaklƒ±ƒüƒ±nƒ±n giderilmesi ve ter–µkenin payla≈üƒ±mƒ±na ili≈ükin esaslar",
                fullText: `YARGITAY 2. HUKUK DAƒ∞RESƒ∞

Esas No: 2023/3456
Karar No: 2023/4567
Karar Tarihi: 10.09.2023

√ñZET: Miras ortaklƒ±ƒüƒ±ndan √ßƒ±kma ve terekenin payla≈üƒ±mƒ±nda uygulanacak kurallar...

KARAR:
Davacƒ± miras√ßƒ±lar, miras ortaklƒ±ƒüƒ±ndan √ßƒ±kmak ve paylarƒ±na d√º≈üen miras payƒ±nƒ±n kendilerine verilmesini talep etmi≈ülerdir...

T√ºrk Medeni Kanunu'nun 640. maddesi uyarƒ±nca, miras√ßƒ±larƒ±n her biri istediƒüi zaman miras ortaklƒ±ƒüƒ±nƒ±n giderilmesini isteyebilir...`
            }
        ];

        // Veri doƒürulama ve temizleme fonksiyonu
        function validateAndCleanDecision(decision) {
            return {
                id: decision.id || Math.random(),
                number: decision.number || 'Bilinmeyen',
                court: decision.court || 'Bilinmeyen Daire',
                date: decision.date || new Date().toISOString().split('T')[0],
                keywords: Array.isArray(decision.keywords) ? decision.keywords : [],
                summary: decision.summary || '√ñzet bulunmuyor',
                fullText: decision.fullText || 'Tam metin bulunmuyor'
            };
        }

        // JSON Dosyasƒ±ndan Veri Y√ºkleme
        async function loadDecisions() {
            const resultsList = document.getElementById('resultsList');
            
            try {
                // GitHub Pages i√ßin doƒüru yol - proje k√∂k dizininden
                const possiblePaths = [
                    './json_files/ornek_kararlar.json',
                    './ornek_kararlar.json',
                    'json_files/ornek_kararlar.json',
                    'ornek_kararlar.json'
                ];

                let response = null;
                let successfulPath = null;

                for (const path of possiblePaths) {
                    try {
                        console.log(`Denenen yol: ${path}`);
                        response = await fetch(path);
                        if (response.ok) {
                            successfulPath = path;
                            break;
                        }
                    } catch (e) {
                        console.log(`${path} denenirken hata:`, e.message);
                    }
                }

                if (!response || !response.ok) {
                    throw new Error('JSON dosyasƒ± hi√ßbir yolda bulunamadƒ±');
                }

                const rawDecisions = await response.json();
                console.log('Ham veri:', rawDecisions);

                // Veriyi doƒürula ve temizle
                const decisions = Array.isArray(rawDecisions) 
                    ? rawDecisions.map(validateAndCleanDecision)
                    : [validateAndCleanDecision(rawDecisions)];

                allDecisions = decisions;
                console.log(`${decisions.length} karar ba≈üarƒ±yla y√ºklendi (${successfulPath})`);
                
                resultsList.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #27ae60;">
                        ‚úÖ ${decisions.length} Yargƒ±tay kararƒ± ba≈üarƒ±yla y√ºklendi<br>
                        <small style="color: #7f8c8d; margin-top: 10px;">Kaynak: ${successfulPath}</small><br>
                        <small style="color: #7f8c8d;">Arama yapmaya hazƒ±r!</small>
                    </div>
                `;

            } catch (error) {
                console.error('Veri y√ºkleme hatasƒ±:', error);
                // Hata durumunda √∂rnek verilerle devam et
                allDecisions = sampleDecisions.map(validateAndCleanDecision);
                resultsList.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #e74c3c;">
                        ‚ö†Ô∏è JSON dosyasƒ± y√ºklenemedi, √∂rnek verilerle √ßalƒ±≈üƒ±yor<br>
                        <small style="color: #7f8c8d;">JSON dosyanƒ±zƒ± proje k√∂k dizinine veya json_files/ klas√∂r√ºne koyun</small><br>
                        <small style="color: #95a5a6;">Hata: ${error.message}</small>
                    </div>
                `;
            }
        }

        // Gemini API ile benzerlik analizi
        async function analyzeWithGemini(searchQuery, decisions) {
            if (!GEMINI_API_KEY) {
                throw new Error('Gemini API key gerekli');
            }

            try {
                const prompt = `
Sen bir hukuki karar analiz uzmanƒ±sƒ±n. A≈üaƒüƒ±daki arama sorgusu ile verilen Yargƒ±tay kararlarƒ± arasƒ±nda benzerlik analizi yap.

ARAMA SORGUSU: "${searchQuery}"

YARGITAY KARARLARI:
${decisions.map((decision, index) => `
${index + 1}. Karar ID: ${decision.id}
Karar No: ${decision.number}
√ñzet: ${decision.summary}
Anahtar Kelimeler: ${decision.keywords.join(', ')}
`).join('')}

G√ñREV: Her karar i√ßin 0-100 arasƒ±nda benzerlik skoru ver. Hukuki kavramlar, konular ve uygulanabilirlik a√ßƒ±sƒ±ndan deƒüerlendir.

√áIKTI FORMATI (sadece JSON):
{
  "results": [
    {"id": 1, "score": 85, "reason": "Tapu ve m√ºlkiyet konularƒ± tamamen uyu≈üuyor"},
    {"id": 2, "score": 45, "reason": "S√∂zle≈üme hukuku genel benzerlik"},
    {"id": 3, "score": 20, "reason": "Miras hukuku farklƒ± alan"}
  ]
}
`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.1,
                            maxOutputTokens: 2048
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error(`Gemini API error: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;
                
                // JSON √ßƒ±kartma
                const jsonMatch = aiResponse.match(/\{[\s\S]*\}/);
                if (jsonMatch) {
                    const analysisResult = JSON.parse(jsonMatch[0]);
                    return analysisResult.results || [];
                }
                
                throw new Error('Ge√ßersiz AI yanƒ±tƒ±');
                
            } catch (error) {
                console.error('Gemini API hatasƒ±:', error);
                throw error;
            }
        }

        // Basit benzerlik hesaplama (fallback)
        function calculateSimpleSimilarity(searchText, decision) {
            if (!searchText.trim()) return 0;
            
            const searchWords = searchText.toLowerCase().split(/\s+/);
            const decisionText = (decision.summary + ' ' + decision.fullText + ' ' + (decision.keywords ? decision.keywords.join(' ') : '')).toLowerCase();
            
            let matchCount = 0;
            searchWords.forEach(word => {
                if (decisionText.includes(word)) {
                    matchCount++;
                }
            });
            
            return Math.round((matchCount / searchWords.length) * 100);
        }

        // API Key y√∂netimi
        function setApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            const statusDiv = document.getElementById('apiStatus');
            
            if (!apiKey) {
                statusDiv.innerHTML = '<span style="color: #e74c3c;">‚ùå API anahtarƒ± bo≈ü olamaz</span>';
                return;
            }
            
            GEMINI_API_KEY = apiKey;
            statusDiv.innerHTML = '<span style="color: #27ae60;">‚úÖ API anahtarƒ± kaydedildi</span>';
            
            // API anahtarƒ±nƒ± gizle
            document.getElementById('apiKeyInput').value = '';
        }

        async function performSearch() {
            const keywordSearch = document.getElementById('keywordSearch').value;
            const aiSearch = document.getElementById('aiSearch').value;
            const resultsList = document.getElementById('resultsList');
            
            if (!keywordSearch.trim() && !aiSearch.trim()) {
                alert('L√ºtfen anahtar kelime veya AI arama alanƒ±nƒ± doldurun');
                return;
            }
            
            resultsList.innerHTML = '<div class="loading">üîç Arama yapƒ±lƒ±yor...</div>';
            
            try {
                // Veri kontrol
                const dataSource = allDecisions.length > 0 ? allDecisions : sampleDecisions;
                let filteredResults = [...dataSource];
                
                console.log('Kullanƒ±lan veri kaynaƒüƒ±:', dataSource.length, 'karar');
                
                // Anahtar kelime filtresi
                if (keywordSearch.trim()) {
                    const keywords = keywordSearch.toLowerCase().split(/\s+/);
                    filteredResults = filteredResults.filter(decision => {
                        // G√ºvenli veri eri≈üimi
                        const keywordsText = decision.keywords ? decision.keywords.join(' ') : '';
                        const summaryText = decision.summary || '';
                        const fullText = decision.fullText || '';
                        
                        const searchText = (keywordsText + ' ' + summaryText + ' ' + fullText).toLowerCase();
                        return keywords.some(keyword => searchText.includes(keyword));
                    });
                }
                
                if (filteredResults.length === 0) {
                    currentResults = [];
                    displayResults();
                    return;
                }
                
                // AI benzerlik skorlarƒ± hesapla
                if (aiSearch.trim()) {
                    resultsList.innerHTML = '<div class="loading">ü§ñ Yapay zeka analiz ediyor...</div>';
                    
                    try {
                        if (GEMINI_API_KEY) {
                            // Gemini API ile analiz
                            const aiAnalysis = await analyzeWithGemini(aiSearch, filteredResults);
                            
                            // AI sonu√ßlarƒ±nƒ± kararlarla e≈üle≈ütir
                            filteredResults = filteredResults.map(decision => {
                                const aiResult = aiAnalysis.find(result => result.id === decision.id);
                                return {
                                    ...decision,
                                    similarityScore: aiResult ? aiResult.score : 0,
                                    aiReason: aiResult ? aiResult.reason : 'Analiz edilemedi'
                                };
                            }).filter(decision => decision.similarityScore > 10);
                            
                            // Benzerlik skoruna g√∂re sƒ±rala
                            filteredResults.sort((a, b) => b.similarityScore - a.similarityScore);
                        } else {
                            throw new Error('API anahtarƒ± yok');
                        }
                        
                    } catch (error) {
                        console.warn('Gemini API hatasƒ±, basit algoritma kullanƒ±lƒ±yor:', error);
                        
                        // Fallback: Basit benzerlik hesaplama
                        filteredResults = filteredResults.map(decision => ({
                            ...decision,
                            similarityScore: calculateSimpleSimilarity(aiSearch, decision),
                            aiReason: 'Basit kelime e≈üle≈ütirme ile'
                        })).filter(decision => decision.similarityScore > 0);
                        
                        filteredResults.sort((a, b) => b.similarityScore - a.similarityScore);
                    }
                } else {
                    // AI arama yoksa tarih sƒ±rasƒ±na g√∂re sƒ±rala
                    filteredResults.sort((a, b) => new Date(b.date) - new Date(a.date));
                }
                
                currentResults = filteredResults;
                displayResults();
                
            } catch (error) {
                console.error('Arama hatasƒ±:', error);
                resultsList.innerHTML = `
                    <div class="no-results">
                        ‚ùå Arama sƒ±rasƒ±nda hata olu≈ütu<br>
                        <small style="color: #95a5a6;">${error.message}</small>
                    </div>
                `;
            }
        }

        function displayResults() {
            const resultsList = document.getElementById('resultsList');
            
            if (currentResults.length === 0) {
                resultsList.innerHTML = '<div class="no-results">‚ùå Arama kriterlerinize uygun karar bulunamadƒ±</div>';
                return;
            }
            
            const resultsHtml = currentResults.map(decision => `
                <div class="decision-item" onclick="selectDecision(${decision.id})">
                    <div class="decision-header">
                        <div class="decision-number">${decision.number}</div>
                        ${decision.similarityScore ? `<div class="similarity-score">${decision.similarityScore}% ben
